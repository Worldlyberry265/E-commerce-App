<header [appHeader]="false" class="main-header"></header>

@if (productStore.loading()) {
<mat-spinner class="product__spinner"></mat-spinner>
} @else {
@if (product()){
<section class="section-product-info">

    <h6 class="product__title">{{ product()?.title }}</h6>

    <div class="product__main-content">
        <img class="product__main-content--img" [src]="product()!.image" alt="product-img">

        <div class="product__main-content--list-buttons-wrapper">
            <ul class="product__main-content--list">
                <li class="product__main-content--list--item">
                    <span class="product__main-content--list--item-title">ID</span>
                    <span class="product__main-content--list--item-value">{{ product()?.id }}</span>
                </li>
                <li class="product__main-content--list--item">
                    <span class="product__main-content--list--item-title">Category</span>
                    <span class="product__main-content--list--item-value">{{ product()?.category }}</span>
                </li>
                <li class="product__main-content--list--item">
                    <span class="product__main-content--list--item-title">Price</span>
                    <span class="product__main-content--list--item-value currency">$ {{ product()?.price }}</span>
                </li>
            </ul>

            <nav class="product__main-content--navigation">
                <div class="product__main-content--navigation--quantity">
                    <span>{{ product()!.quantity === undefined ? 1 : product()!.quantity }}</span>
                    <div>
                        <i (click)="decrementQuantity()" class="fa-solid fa-circle-minus"></i>
                        <i (click)="incrementQuantity()" class="fa-solid fa-circle-plus"></i>
                    </div>
                </div>

                <div class="product__main-content--navigation--buttons-container">
                    <button mat-flat-button (click)="onAlterCart()"
                        class="product__main-content--navigation--button product__main-content--navigation--button-add"
                        [class.product__main-content--navigation--button-add]="!itemAdded()"
                        [class.product__main-content--navigation--button-remove]="itemAdded()">
                        {{ itemAdded() ? 'Remove From Cart' : 'Add To Cart'}}
                    </button>
                    <button mat-flat-button (click)="onAlterSavedItems()"
                        class="product__main-content--navigation--button product__main-content--navigation--button-save">
                        Save
                    </button>
                </div>
            </nav>

        </div>

    </div>

    <div class="product__rating" appReview [reviewsCount]="product()!.rating.count" [stars]="product()!.rating.rate">
    </div>

    <p class="product__description">{{ product()!.description }}</p>


</section>

<section class="section-related-products" (mouseenter)="onCancelScrolling()" (mouseleave)="onEnableScrolling()">

    <h6 class="product__related--title">Products that may interest you</h6>
    <!-- Used the ngFor because the new @for syntax caused a problem with the animation transitions -->
    <div *ngFor="let img of displayedImgs; let i=index" class="product__related--item product__related--item-{{i}}">
        <h6 class="product__related--item--title">{{ i }}</h6>
        <img [src]="img" alt="related product img" class="product__related--item--img">
    </div>
</section>
}
@else {
<h1 class="product__not-found">Page Not Found</h1>
}
}